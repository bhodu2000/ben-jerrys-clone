[WARN ] 25-09-29 00:00:49 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=14m44s137ms).
[WARN ] 25-09-29 00:20:18 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=19m29s4ms).
[WARN ] 25-09-29 01:26:05 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h5m16s835ms).
[WARN ] 25-09-29 02:31:21 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h5m15s942ms).
[WARN ] 25-09-29 03:37:01 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h5m10s792ms).
[WARN ] 25-09-29 04:14:46 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=37m44s511ms).
[WARN ] 25-09-29 04:35:13 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=19m57s10ms).
[WARN ] 25-09-29 05:41:03 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h5m20s589ms).
[WARN ] 25-09-29 06:15:55 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=34m51s636ms).
[WARN ] 25-09-29 07:00:43 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=44m18s84ms).
[WARN ] 25-09-29 07:16:51 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16m7s606ms).
[WARN ] 25-09-29 08:18:04 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h42s990ms).
[WARN ] 25-09-29 08:27:02 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m28s393ms).
[WARN ] 25-09-29 08:57:48 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=30m15s679ms).
[WARN ] 25-09-29 09:18:56 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=21m7s975ms).
[WARN ] 25-09-29 10:20:10 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h43s951ms).
[WARN ] 25-09-29 10:26:53 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m43s131ms).
[WARN ] 25-09-29 10:34:58 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m34s740ms).
[WARN ] 25-09-29 11:20:49 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=45m51s296ms).
[WARN ] 25-09-29 11:36:57 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m38s102ms).
[WARN ] 25-09-29 11:38:46 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m19s122ms).
[WARN ] 25-09-29 11:50:26 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=11m39s597ms).
[INFO ] 25-09-29 11:55:31 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 93066 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 11:55:31 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 11:55:31 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 11:55:35 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.544 seconds (process running for 6.448)
[INFO ] 25-09-29 11:56:34 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 11:56:34 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 11:56:34 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 11:56:35 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 11:56:35 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 11:56:35 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 11:56:35 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko as altKo FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 11:56:35 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT role, url, alt_ko as altKo
FROM variant_media
WHERE variant_id = 30006
ORDER BY role, sort_order

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|
|role      |url                                                                        |alt_ko         |
|----------|---------------------------------------------------------------------------|---------------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |
|----------|---------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 11:56:35 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 11:56:35 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 11:56:35 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 11:56:35 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 11:56:35 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 11:56:35 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 11:56:35 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 11:56:35 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 11:56:35 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 11:56:35 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 11:56:35 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 11:56:35 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 11:56:35 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 11:56:35 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 11:56:35 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 11:56:35 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 11:56:35 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 11:56:35 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 11:56:35 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 11:56:35 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 11:56:35 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 11:56:35 [MyInterceptor:122] - running time: 1354(ms)
[INFO ] 25-09-29 12:08:02 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 93940 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 12:08:02 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 12:08:02 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 12:08:07 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.191 seconds (process running for 5.972)
[INFO ] 25-09-29 12:08:20 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:08:21 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:08:21 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 12:08:21 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 12:08:21 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 12:08:21 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 12:08:21 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko as altKo FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 12:08:21 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT role, url, alt_ko as altKo
FROM variant_media
WHERE variant_id = 30006
ORDER BY role, sort_order

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|
|role      |url                                                                        |alt_ko         |
|----------|---------------------------------------------------------------------------|---------------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |
|----------|---------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 12:08:21 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 12:08:21 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 12:08:21 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:08:21 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 12:08:21 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 12:08:21 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:08:21 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 12:08:21 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 12:08:21 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 12:08:21 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 12:08:21 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 12:08:21 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:08:21 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 12:08:21 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 12:08:21 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 12:08:21 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 12:08:21 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 12:08:21 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 12:08:21 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 12:08:21 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 12:08:21 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 12:08:21 [MyInterceptor:122] - running time: 1083(ms)
[INFO ] 25-09-29 12:11:07 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94178 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 12:11:07 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 12:11:07 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 12:11:11 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.377 seconds (process running for 6.152)
[INFO ] 25-09-29 12:11:48 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:11:48 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:11:48 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 12:11:49 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 12:11:49 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 12:11:49 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 12:11:49 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko as altKo FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 12:11:49 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT role, url, alt_ko as altKo
FROM variant_media
WHERE variant_id = 30006
ORDER BY role, sort_order

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|
|role      |url                                                                        |alt_ko         |
|----------|---------------------------------------------------------------------------|---------------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |
|----------|---------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 12:11:49 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 12:11:49 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 12:11:49 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:11:49 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 12:11:49 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 12:11:49 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:11:49 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 12:11:49 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 12:11:49 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 12:11:49 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 12:11:49 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 12:11:49 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:11:49 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 12:11:49 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 12:11:49 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 12:11:49 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 12:11:49 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 12:11:49 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 12:11:49 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 12:11:49 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 12:11:50 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 12:11:50 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 12:11:50 [MyInterceptor:122] - running time: 1599(ms)
[INFO ] 25-09-29 12:12:01 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:12:01 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:12:01 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 12:12:59 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94334 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 12:12:59 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 12:12:59 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 12:13:03 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.358 seconds (process running for 6.153)
[INFO ] 25-09-29 12:13:18 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:13:18 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:13:18 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 12:13:19 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 12:13:19 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 12:13:19 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 12:13:19 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko as altKo FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 12:13:19 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT role, url, alt_ko as altKo
FROM variant_media
WHERE variant_id = 30006
ORDER BY role, sort_order

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|
|role      |url                                                                        |alt_ko         |
|----------|---------------------------------------------------------------------------|---------------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |
|----------|---------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 12:13:19 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 12:13:19 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 12:13:19 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:13:19 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 12:13:19 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 12:13:19 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:13:19 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 12:13:19 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 12:13:19 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 12:13:19 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 12:13:19 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 12:13:19 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:13:19 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 12:13:19 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 12:13:19 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 12:13:19 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 12:13:19 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 12:13:19 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 12:13:19 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 12:13:19 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 12:13:19 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 12:13:19 [MyInterceptor:122] - running time: 1043(ms)
[INFO ] 25-09-29 12:13:19 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:13:20 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:13:20 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 12:14:42 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:14:43 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:14:43 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 12:17:49 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94691 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 12:17:49 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 12:17:49 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 12:17:54 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.931 seconds (process running for 6.717)
[INFO ] 25-09-29 12:18:28 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:18:29 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:18:29 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 12:18:29 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 12:18:29 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 12:18:29 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 12:18:29 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 12:18:29 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 12:18:29 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko as altKo FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 12:18:29 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:18:29 [sqlonly:228] - SELECT role, url, alt_ko as altKo
FROM variant_media
WHERE variant_id = 30006
ORDER BY role, sort_order

[INFO ] 25-09-29 12:18:29 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|
|role      |url                                                                        |alt_ko         |
|----------|---------------------------------------------------------------------------|---------------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |
|----------|---------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 12:18:29 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 12:18:29 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 12:18:29 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:18:29 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 12:18:29 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:18:29 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 12:18:29 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 12:18:29 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:18:29 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 12:18:30 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:18:30 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 12:18:30 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 12:18:30 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:18:30 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 12:18:30 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 12:18:30 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 12:18:30 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 12:18:30 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 12:18:30 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 12:18:30 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 12:18:30 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 12:18:30 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 12:18:30 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 12:18:30 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 12:18:30 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 12:18:30 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 12:18:30 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 12:18:30 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 12:18:30 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 12:18:30 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 12:18:30 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 12:18:30 [MyInterceptor:122] - running time: 1231(ms)
[INFO ] 25-09-29 12:18:30 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 12:18:31 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 12:18:31 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[WARN ] 25-09-29 13:02:54 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16m24s742ms).
[WARN ] 25-09-29 13:33:57 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=30m32s540ms).
[WARN ] 25-09-29 14:38:53 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h4m55s782ms).
[WARN ] 25-09-29 14:48:01 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m38s207ms).
[WARN ] 25-09-29 15:49:14 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h42s991ms).
[WARN ] 25-09-29 16:27:30 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=38m16s402ms).
[WARN ] 25-09-29 16:50:11 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=22m10s599ms).
[WARN ] 25-09-29 17:26:39 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=36m28s317ms).
[WARN ] 25-09-29 17:51:08 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m58s638ms).
[WARN ] 25-09-29 18:03:38 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=12m30s429ms).
[WARN ] 25-09-29 18:42:08 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=37m59s335ms).
[WARN ] 25-09-29 18:51:48 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m40s338ms).
[WARN ] 25-09-29 19:23:21 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=31m2s530ms).
[WARN ] 25-09-29 19:40:46 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16m55s56ms).
[WARN ] 25-09-29 19:48:29 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m43s328ms).
[WARN ] 25-09-29 19:53:11 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m11s645ms).
[WARN ] 25-09-29 19:54:25 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m14s810ms).
[WARN ] 25-09-29 19:59:39 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m43s651ms).
[WARN ] 25-09-29 20:31:20 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m40s309ms).
[INFO ] 25-09-29 20:36:40 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 20:36:40 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 20:36:40 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 20:36:45 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.705 seconds (process running for 6.638)
[INFO ] 25-09-29 20:37:00 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 20:37:01 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 20:37:01 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 20:37:01 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 20:37:01 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 20:37:01 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 20:37:01 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko as altKo FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 20:37:01 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT role, url, alt_ko as altKo
FROM variant_media
WHERE variant_id = 30006
ORDER BY role, sort_order

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|
|role      |url                                                                        |alt_ko         |
|----------|---------------------------------------------------------------------------|---------------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |
|----------|---------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 20:37:01 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 20:37:01 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 20:37:01 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 20:37:01 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 20:37:01 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 20:37:01 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 20:37:01 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 20:37:01 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 20:37:01 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 20:37:01 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 20:37:01 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 20:37:01 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 20:37:01 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 20:37:01 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 20:37:01 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 20:37:01 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 20:37:01 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 20:37:01 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 20:37:01 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 20:37:01 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 20:37:01 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 20:37:01 [MyInterceptor:122] - running time: 1095(ms)
[INFO ] 25-09-29 20:37:02 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 20:37:02 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 20:37:02 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 20:53:50 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 20:53:50 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 20:53:50 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 20:53:52 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 2.515 seconds (process running for 1033.722)
[INFO ] 25-09-29 20:53:54 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 20:53:54 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 20:53:54 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 20:53:55 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.001 seconds (process running for 1036.234)
[INFO ] 25-09-29 21:36:09 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:36:09 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:36:09 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:36:11 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 2.411 seconds (process running for 3572.555)
[INFO ] 25-09-29 21:36:13 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:36:13 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:36:13 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:36:14 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.181 seconds (process running for 3575.47)
[INFO ] 25-09-29 21:36:26 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:36:26 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:36:26 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:36:27 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.221 seconds (process running for 3588.559)
[INFO ] 25-09-29 21:36:29 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:36:29 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:36:29 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:36:30 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.147 seconds (process running for 3591.221)
[INFO ] 25-09-29 21:47:06 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:47:06 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:47:06 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:47:07 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.047 seconds (process running for 4228.669)
[INFO ] 25-09-29 21:51:58 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:51:58 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:51:58 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:52:00 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.388 seconds (process running for 4521.067)
[INFO ] 25-09-29 21:53:09 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:53:09 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:53:09 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:53:10 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.098 seconds (process running for 4591.259)
[INFO ] 25-09-29 21:53:39 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:53:39 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:53:39 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:53:40 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.003 seconds (process running for 4621.475)
[INFO ] 25-09-29 21:53:42 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:53:42 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:53:42 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:53:42 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 0.81 seconds (process running for 4623.84)
[INFO ] 25-09-29 21:54:18 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:54:18 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:54:18 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:54:19 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 0.842 seconds (process running for 4660.18)
[INFO ] 25-09-29 21:59:05 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 703 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:59:05 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:59:05 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:59:06 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 0.947 seconds (process running for 4947.17)
[INFO ] 25-09-29 21:59:28 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 6900 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 21:59:28 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 21:59:29 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 21:59:33 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.487 seconds (process running for 6.365)
[INFO ] 25-09-29 22:00:00 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:00:01 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:00:01 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:00:01 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:00:01 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:00:01 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:00:01 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:00:01 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:00:01 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:00:02 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:00:02 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:00:02 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:00:02 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:00:02 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:00:02 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:00:02 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:00:02 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:00:02 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:00:02 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:00:02 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:00:02 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:00:02 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:00:02 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:00:02 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:00:02 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:00:02 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:00:02 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:00:02 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:00:02 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:00:02 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:00:02 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:00:02 [MyInterceptor:122] - running time: 1249(ms)
[INFO ] 25-09-29 22:00:02 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:00:03 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:00:03 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:00:18 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:00:18 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:00:18 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 22:00:18 [MyInterceptor:101] - - REFERER : time=16089, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:00:18 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:00:18 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:00:18 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:00:18 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:00:18 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:00:18 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:00:18 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:00:18 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:00:18 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:00:18 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:00:18 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:00:18 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:00:18 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:00:18 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:00:18 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:00:18 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:00:18 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:00:18 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:00:18 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:00:18 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:00:18 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:00:18 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:00:18 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:00:18 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:00:18 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:00:18 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:00:18 [MyInterceptor:122] - running time: 179(ms)
[INFO ] 25-09-29 22:00:18 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:00:18 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:00:18 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:13:00 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 7955 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:13:00 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:13:00 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:13:05 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.44 seconds (process running for 6.341)
[INFO ] 25-09-29 22:13:12 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:13:13 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:13:13 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:13:13 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:13:14 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:13:14 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:14 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:13:14 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:13:14 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:13:14 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:13:14 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:14 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:14 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:13:14 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:14 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:13:14 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:13:14 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:13:14 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:14 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:13:14 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:14 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:13:14 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:13:14 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:13:14 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:13:14 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:13:14 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:13:14 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:13:14 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:13:14 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:13:14 [MyInterceptor:122] - running time: 1250(ms)
[INFO ] 25-09-29 22:13:14 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:13:15 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:13:15 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:13:23 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:13:23 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:13:23 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 22:13:23 [MyInterceptor:101] - - REFERER : time=8908, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:13:23 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:13:23 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:13:23 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:23 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:13:23 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:13:23 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:13:23 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:13:23 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:23 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:23 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:13:23 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:23 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:13:23 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:13:23 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:13:23 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:23 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:13:23 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:23 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:13:23 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:13:23 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:13:23 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:13:23 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:13:23 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:13:23 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:13:23 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:13:23 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:13:23 [MyInterceptor:122] - running time: 187(ms)
[INFO ] 25-09-29 22:13:23 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:13:23 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:13:23 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:13:57 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:13:57 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:13:57 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 22:13:57 [MyInterceptor:101] - - REFERER : time=33876, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:13:57 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:13:57 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:13:57 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:57 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:13:57 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:13:57 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:13:57 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:13:57 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:57 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:57 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:13:57 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:57 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:13:57 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:13:57 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:13:57 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:13:57 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:13:57 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:13:57 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:13:57 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:13:57 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:13:57 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:13:57 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:13:57 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:13:57 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:13:57 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:13:57 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:13:57 [MyInterceptor:122] - running time: 121(ms)
[INFO ] 25-09-29 22:13:57 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:13:57 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:13:57 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:14:24 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:14:24 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:14:24 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:14:32 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:14:33 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:14:33 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[INFO ] 25-09-29 22:14:33 [MyInterceptor:101] - - REFERER : time=35704, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:14:33 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:14:33 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), mini-cup(String)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'mini-cup'

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|id    |variant_description_ko                                                                                                                |id    |slug                    |name_ko  |description_ko           |is_new |slug     |list_slug      |name_ko |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|30023 |기타리스트인 제리 가르시아 (Jerry Garcia)와 그레이트 풀 데드 (Grateful Dead) 팬들에게 헌사하는 벤앤제리스의 대표 메뉴. 록 전설의 이름을 딴 최초의 아이스크림이자 벤앤제리스의 팬들이 추천하는 가장 유명한 맛입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |mini-cup |ice-cream-cups |미니컵     |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|

[DEBUG] 25-09-29 22:14:33 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:14:33 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:14:33 [selectVariantMedia:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30023
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/packshot/main.png    |체리 가르시아 미니컵 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/gallery/01-tower.png |null           |1          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/nutrition/120ml.png  |영양성분표 120ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:14:33 [selectVariantMedia:135] - <==      Total: 3
[DEBUG] 25-09-29 22:14:33 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:14:33 [selectVariantIngredients:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30023

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                           |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840200153-0003-en-US-1701785653440/index.html#nutrition |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:14:33 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:14:33 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:14:33 [selectVariantSourcing:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30023
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:14:33 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:14:33 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:14:33 [selectVariantCerts:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30023
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 22:14:33 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 22:14:33 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:14:33 [selectRecommendations:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30023
ORDER BY r.slot

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 22:14:33 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 22:14:33 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:14:33 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:14:33 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:14:33 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:14:33 [findNextVariant:135] - ==> Parameters: 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long)
[INFO ] 25-09-29 22:14:33 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30023))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30023)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:14:33 [resultsettable:610] - 
|------|--------------------------------------|---------|
|id    |slug                                  |slug     |
|------|--------------------------------------|---------|
|30022 |chocolate-chip-cookie-dough-ice-cream |mini-cup |
|------|--------------------------------------|---------|

[DEBUG] 25-09-29 22:14:33 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:14:33 [MyInterceptor:122] - running time: 95(ms)
[INFO ] 25-09-29 22:14:33 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:14:33 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:14:33 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:14:35 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:14:35 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:14:35 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[INFO ] 25-09-29 22:14:35 [MyInterceptor:101] - - REFERER : time=2748, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[DEBUG] 25-09-29 22:14:35 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:14:35 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), scoop-shop(String)
[INFO ] 25-09-29 22:14:35 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'scoop-shop'

[INFO ] 25-09-29 22:14:35 [resultsettable:610] - 
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|id    |variant_description_ko                               |id    |slug                    |name_ko  |description_ko           |is_new |slug       |list_slug               |name_ko |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|30031 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |scoop-shop |ice-cream-shop-flavours |스쿱 샵    |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|

[DEBUG] 25-09-29 22:14:35 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:14:35 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:14:35 [selectVariantMedia:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:14:35 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30031
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:14:35 [resultsettable:610] - 
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|role     |url                                                                          |alt_ko        |sort_order |
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|PACKSHOT |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/packshot/main.png    |체리 가르시아 스쿱 팩샷 |0          |
|GALLERY  |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/gallery/01-tower.png |null          |1          |
|---------|-----------------------------------------------------------------------------|--------------|-----------|

[DEBUG] 25-09-29 22:14:35 [selectVariantMedia:135] - <==      Total: 2
[DEBUG] 25-09-29 22:14:35 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:14:35 [selectVariantIngredients:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:14:35 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30031

[INFO ] 25-09-29 22:14:35 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|ingredients_ko                                                                                                                   |smartlabel_url |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |null           |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 22:14:35 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:14:35 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:14:35 [selectVariantSourcing:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:14:35 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30031
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:14:35 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:14:35 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:14:35 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:14:35 [selectVariantCerts:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:14:35 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30031
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:14:36 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 22:14:36 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 22:14:36 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:14:36 [selectRecommendations:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:14:36 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30031
ORDER BY r.slot

[INFO ] 25-09-29 22:14:36 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 22:14:36 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 22:14:36 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:14:36 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:14:36 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:14:36 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:14:36 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:14:36 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:14:36 [findNextVariant:135] - ==> Parameters: 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long)
[INFO ] 25-09-29 22:14:36 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30031))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30031)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:14:36 [resultsettable:610] - 
|------|--------------------|-----------|
|id    |slug                |slug       |
|------|--------------------|-----------|
|30032 |chocolate-ice-cream |scoop-shop |
|------|--------------------|-----------|

[DEBUG] 25-09-29 22:14:36 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:14:36 [MyInterceptor:122] - running time: 223(ms)
[INFO ] 25-09-29 22:14:36 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:14:36 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:14:36 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[WARN ] 25-09-29 22:18:12 [HikariPool:825] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=58s239ms).
[INFO ] 25-09-29 22:24:00 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 8728 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:24:00 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:24:00 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:24:04 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.259 seconds (process running for 6.039)
[INFO ] 25-09-29 22:24:15 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:24:16 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:24:16 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:24:16 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:24:16 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), scoop-shop(String)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'scoop-shop'

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|id    |variant_description_ko                               |id    |slug                    |name_ko  |description_ko           |is_new |slug       |list_slug               |name_ko |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|30031 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |scoop-shop |ice-cream-shop-flavours |스쿱 샵    |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|

[DEBUG] 25-09-29 22:24:16 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:16 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:24:16 [selectVariantMedia:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30031
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|role     |url                                                                          |alt_ko        |sort_order |
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|PACKSHOT |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/packshot/main.png    |체리 가르시아 스쿱 팩샷 |0          |
|GALLERY  |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/gallery/01-tower.png |null          |1          |
|---------|-----------------------------------------------------------------------------|--------------|-----------|

[DEBUG] 25-09-29 22:24:16 [selectVariantMedia:135] - <==      Total: 2
[DEBUG] 25-09-29 22:24:16 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:24:16 [selectVariantIngredients:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30031

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|ingredients_ko                                                                                                                   |smartlabel_url |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |null           |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 22:24:16 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:16 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:24:16 [selectVariantSourcing:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30031
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:24:16 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:24:16 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:24:16 [selectVariantCerts:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30031
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 22:24:16 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 22:24:16 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:24:16 [selectRecommendations:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30031
ORDER BY r.slot

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 22:24:16 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 22:24:16 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:24:16 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:24:16 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:24:16 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:24:16 [findNextVariant:135] - ==> Parameters: 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long)
[INFO ] 25-09-29 22:24:16 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30031))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30031)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:24:16 [resultsettable:610] - 
|------|--------------------|-----------|
|id    |slug                |slug       |
|------|--------------------|-----------|
|30032 |chocolate-ice-cream |scoop-shop |
|------|--------------------|-----------|

[DEBUG] 25-09-29 22:24:16 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:24:16 [MyInterceptor:122] - running time: 1142(ms)
[INFO ] 25-09-29 22:24:17 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:24:18 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:24:18 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:24:22 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:24:22 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:24:22 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 22:24:22 [MyInterceptor:101] - - REFERER : time=5794, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:24:22 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:24:22 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:24:22 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:22 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:24:22 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:24:22 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:24:22 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:24:22 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:24:22 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:22 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:24:22 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:24:22 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:24:22 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:24:22 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:24:22 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:22 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:24:22 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:24:22 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:24:22 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:24:22 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:24:22 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:24:22 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:24:22 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:24:22 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:24:22 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:24:22 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:24:22 [MyInterceptor:122] - running time: 166(ms)
[INFO ] 25-09-29 22:24:23 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:24:23 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:24:23 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:24:25 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:24:25 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:24:25 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[INFO ] 25-09-29 22:24:25 [MyInterceptor:101] - - REFERER : time=2185, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:24:25 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:24:25 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), mini-cup(String)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'mini-cup'

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|id    |variant_description_ko                                                                                                                |id    |slug                    |name_ko  |description_ko           |is_new |slug     |list_slug      |name_ko |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|30023 |기타리스트인 제리 가르시아 (Jerry Garcia)와 그레이트 풀 데드 (Grateful Dead) 팬들에게 헌사하는 벤앤제리스의 대표 메뉴. 록 전설의 이름을 딴 최초의 아이스크림이자 벤앤제리스의 팬들이 추천하는 가장 유명한 맛입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |mini-cup |ice-cream-cups |미니컵     |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|

[DEBUG] 25-09-29 22:24:25 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:25 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:24:25 [selectVariantMedia:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30023
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/packshot/main.png    |체리 가르시아 미니컵 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/gallery/01-tower.png |null           |1          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/nutrition/120ml.png  |영양성분표 120ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:24:25 [selectVariantMedia:135] - <==      Total: 3
[DEBUG] 25-09-29 22:24:25 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:24:25 [selectVariantIngredients:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30023

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                           |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840200153-0003-en-US-1701785653440/index.html#nutrition |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:24:25 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:24:25 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:24:25 [selectVariantSourcing:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30023
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:24:25 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:24:25 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:24:25 [selectVariantCerts:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30023
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 22:24:25 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 22:24:25 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:24:25 [selectRecommendations:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30023
ORDER BY r.slot

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 22:24:25 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 22:24:25 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:24:25 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:24:25 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:24:25 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:24:25 [findNextVariant:135] - ==> Parameters: 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long)
[INFO ] 25-09-29 22:24:25 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30023))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30023)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:24:25 [resultsettable:610] - 
|------|--------------------------------------|---------|
|id    |slug                                  |slug     |
|------|--------------------------------------|---------|
|30022 |chocolate-chip-cookie-dough-ice-cream |mini-cup |
|------|--------------------------------------|---------|

[DEBUG] 25-09-29 22:24:25 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:24:25 [MyInterceptor:122] - running time: 142(ms)
[INFO ] 25-09-29 22:24:25 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:24:25 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:24:25 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:28:38 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 9092 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:28:38 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:28:38 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:28:42 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.641 seconds (process running for 6.428)
[INFO ] 25-09-29 22:28:50 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:28:51 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:28:51 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[DEBUG] 25-09-29 22:28:51 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:28:51 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), mini-cup(String)
[INFO ] 25-09-29 22:28:51 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'mini-cup'

[INFO ] 25-09-29 22:28:51 [resultsettable:610] - 
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|id    |variant_description_ko                                                                                                                |id    |slug                    |name_ko  |description_ko           |is_new |slug     |list_slug      |name_ko |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|30023 |기타리스트인 제리 가르시아 (Jerry Garcia)와 그레이트 풀 데드 (Grateful Dead) 팬들에게 헌사하는 벤앤제리스의 대표 메뉴. 록 전설의 이름을 딴 최초의 아이스크림이자 벤앤제리스의 팬들이 추천하는 가장 유명한 맛입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |mini-cup |ice-cream-cups |미니컵     |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|

[DEBUG] 25-09-29 22:28:51 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:28:51 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:28:51 [selectVariantMedia:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:28:51 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30023
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:28:51 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/packshot/main.png    |체리 가르시아 미니컵 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/gallery/01-tower.png |null           |1          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/nutrition/120ml.png  |영양성분표 120ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:28:51 [selectVariantMedia:135] - <==      Total: 3
[DEBUG] 25-09-29 22:28:51 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:28:51 [selectVariantIngredients:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:28:51 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30023

[INFO ] 25-09-29 22:28:51 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                           |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840200153-0003-en-US-1701785653440/index.html#nutrition |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:28:51 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:28:51 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:28:51 [selectVariantSourcing:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:28:52 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30023
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:28:52 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:28:52 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:28:52 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:28:52 [selectVariantCerts:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:28:52 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30023
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:28:52 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 22:28:52 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 22:28:52 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:28:52 [selectRecommendations:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 22:28:52 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30023
ORDER BY r.slot

[INFO ] 25-09-29 22:28:52 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 22:28:52 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 22:28:52 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:28:52 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:28:52 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:28:52 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:28:52 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:28:52 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:28:52 [findNextVariant:135] - ==> Parameters: 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long)
[INFO ] 25-09-29 22:28:52 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30023))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30023)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:28:52 [resultsettable:610] - 
|------|--------------------------------------|---------|
|id    |slug                                  |slug     |
|------|--------------------------------------|---------|
|30022 |chocolate-chip-cookie-dough-ice-cream |mini-cup |
|------|--------------------------------------|---------|

[DEBUG] 25-09-29 22:28:52 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:28:52 [MyInterceptor:122] - running time: 1199(ms)
[INFO ] 25-09-29 22:28:52 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:28:53 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:28:53 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:29:04 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:29:04 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:29:04 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[INFO ] 25-09-29 22:29:04 [MyInterceptor:101] - - REFERER : time=12702, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[DEBUG] 25-09-29 22:29:04 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:29:04 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), scoop-shop(String)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'scoop-shop'

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|id    |variant_description_ko                               |id    |slug                    |name_ko  |description_ko           |is_new |slug       |list_slug               |name_ko |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|30031 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |scoop-shop |ice-cream-shop-flavours |스쿱 샵    |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|

[DEBUG] 25-09-29 22:29:04 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:29:04 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:29:04 [selectVariantMedia:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30031
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|role     |url                                                                          |alt_ko        |sort_order |
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|PACKSHOT |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/packshot/main.png    |체리 가르시아 스쿱 팩샷 |0          |
|GALLERY  |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/gallery/01-tower.png |null          |1          |
|---------|-----------------------------------------------------------------------------|--------------|-----------|

[DEBUG] 25-09-29 22:29:04 [selectVariantMedia:135] - <==      Total: 2
[DEBUG] 25-09-29 22:29:04 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:29:04 [selectVariantIngredients:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30031

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|ingredients_ko                                                                                                                   |smartlabel_url |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |null           |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 22:29:04 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:29:04 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:29:04 [selectVariantSourcing:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30031
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:29:04 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:29:04 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:29:04 [selectVariantCerts:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30031
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 22:29:04 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 22:29:04 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:29:04 [selectRecommendations:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30031
ORDER BY r.slot

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 22:29:04 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 22:29:04 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:29:04 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:29:04 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:29:04 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:29:04 [findNextVariant:135] - ==> Parameters: 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long)
[INFO ] 25-09-29 22:29:04 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30031))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30031)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:29:04 [resultsettable:610] - 
|------|--------------------|-----------|
|id    |slug                |slug       |
|------|--------------------|-----------|
|30032 |chocolate-ice-cream |scoop-shop |
|------|--------------------|-----------|

[DEBUG] 25-09-29 22:29:04 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:29:04 [MyInterceptor:122] - running time: 168(ms)
[INFO ] 25-09-29 22:29:05 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:29:05 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:29:05 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:29:09 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:29:09 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:29:09 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 22:29:09 [MyInterceptor:101] - - REFERER : time=4618, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:29:09 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:29:09 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:29:09 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:29:09 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:29:09 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:29:09 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:29:09 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:29:09 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:29:09 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:29:09 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:29:09 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:29:09 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:29:09 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:29:09 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:29:09 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:29:09 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:29:09 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:29:09 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:29:09 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:29:09 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:29:09 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:29:09 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:29:09 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:29:09 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:29:09 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:29:09 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:29:09 [MyInterceptor:122] - running time: 126(ms)
[INFO ] 25-09-29 22:29:09 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:29:10 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:29:10 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:29:57 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 9214 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:29:57 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:29:57 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:30:01 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.238 seconds (process running for 6.035)
[INFO ] 25-09-29 22:30:08 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:30:08 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:30:08 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:30:09 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:30:09 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:30:09 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:30:09 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:30:09 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:30:09 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:30:09 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:30:09 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:30:09 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:30:09 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:30:09 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:30:09 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:30:09 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:30:09 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:30:09 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:30:09 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:30:09 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:30:09 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:30:09 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:30:09 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:30:09 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:30:09 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:30:09 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:30:09 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:30:09 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:30:09 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:30:09 [MyInterceptor:122] - running time: 1265(ms)
[INFO ] 25-09-29 22:30:10 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:30:10 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:30:10 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:31:06 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:31:06 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:31:06 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 22:31:06 [MyInterceptor:101] - - REFERER : time=56821, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 22:31:06 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:31:06 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:31:06 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:31:06 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:31:06 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:31:06 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:31:06 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:31:06 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:31:06 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:31:06 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:31:06 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:31:06 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:31:06 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:31:06 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:31:06 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:31:06 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:31:06 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:31:06 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:31:06 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:31:06 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:31:06 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:31:06 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:31:06 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:31:06 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:31:06 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:31:06 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:31:06 [MyInterceptor:122] - running time: 184(ms)
[INFO ] 25-09-29 22:31:06 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:31:07 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:31:07 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:35:38 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 9214 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:35:38 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:35:38 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:35:40 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.669 seconds (process running for 344.443)
[INFO ] 25-09-29 22:35:47 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:35:47 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:35:47 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:35:47 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:35:47 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:35:47 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:35:47 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:35:47 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:35:47 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:35:47 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:35:47 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:35:48 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:35:48 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:35:48 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:35:48 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:35:48 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:35:48 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:35:48 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:35:48 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:35:48 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:35:48 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:35:48 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:35:48 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:35:48 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:35:48 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:35:48 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:35:48 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:35:48 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:35:48 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:35:48 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:35:48 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:35:48 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:35:48 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:35:48 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:35:48 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:35:48 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:35:48 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:35:48 [MyInterceptor:122] - running time: 249(ms)
[INFO ] 25-09-29 22:35:48 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:35:48 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:35:48 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:44:32 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 9214 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:44:32 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:44:32 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:44:33 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.359 seconds (process running for 878.198)
[INFO ] 25-09-29 22:44:49 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 10373 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:44:49 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:44:49 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:44:53 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.47 seconds (process running for 6.264)
[INFO ] 25-09-29 22:44:59 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:44:59 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:44:59 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:45:00 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:45:00 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:45:00 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:45:00 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:45:00 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:45:00 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:45:00 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 22:45:00 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 22:45:00 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 22:45:00 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:45:00 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:45:00 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:45:00 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:45:00 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:45:00 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:45:00 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:45:00 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:45:00 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:45:00 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:45:00 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:45:00 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:45:00 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:45:00 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:45:00 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:45:00 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:45:00 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:45:00 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:45:00 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:45:00 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:45:00 [MyInterceptor:122] - running time: 1110(ms)
[INFO ] 25-09-29 22:45:00 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:45:01 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:45:01 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:50:18 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 10373 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:50:18 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:50:18 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:50:19 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.447 seconds (process running for 331.932)
[INFO ] 25-09-29 22:50:44 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:50:44 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:50:44 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:50:44 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:50:44 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:50:44 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:50:44 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:50:44 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:50:44 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:50:44 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 22:50:44 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 22:50:44 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 22:50:44 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:50:44 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:50:44 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:50:44 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:50:44 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:50:44 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:50:44 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:50:44 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:50:44 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:50:44 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:50:44 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:50:44 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:50:44 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:50:44 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:50:44 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:50:44 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:50:44 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:50:44 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:50:44 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:50:44 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:50:44 [MyInterceptor:122] - running time: 217(ms)
[INFO ] 25-09-29 22:50:44 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:50:44 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:50:44 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:51:44 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 10903 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:51:44 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:51:44 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:51:49 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.337 seconds (process running for 6.147)
[INFO ] 25-09-29 22:51:53 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:51:53 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:51:53 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:51:53 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:51:53 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:51:53 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:51:54 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:51:54 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:51:54 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:51:54 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:51:54 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 22:51:54 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 22:51:54 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 22:51:54 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:51:54 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:51:54 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:51:54 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:51:54 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:51:54 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:51:54 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:51:54 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:51:54 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:51:54 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:51:54 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:51:54 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:51:54 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:51:54 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:51:54 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:51:54 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:51:54 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:51:54 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:51:54 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:51:54 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:51:54 [MyInterceptor:122] - running time: 1080(ms)
[INFO ] 25-09-29 22:51:54 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:51:55 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:51:55 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:58:07 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 11373 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:58:07 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:58:07 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:58:12 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.727 seconds (process running for 6.511)
[INFO ] 25-09-29 22:58:30 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:58:30 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:58:30 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 22:58:31 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 22:58:31 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 22:58:31 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 22:58:31 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 22:58:31 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 22:58:31 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 22:58:31 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 22:58:31 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 22:58:31 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 22:58:31 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 22:58:31 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:58:31 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 22:58:31 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 22:58:31 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:58:31 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 22:58:31 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 22:58:31 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 22:58:31 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 22:58:31 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 22:58:31 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 22:58:31 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 22:58:31 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 22:58:31 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 22:58:31 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 22:58:31 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 22:58:31 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 22:58:31 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 22:58:31 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 22:58:31 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 22:58:31 [MyInterceptor:122] - running time: 1119(ms)
[INFO ] 25-09-29 22:58:31 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 22:58:32 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 22:58:32 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 22:58:56 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 11465 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 22:58:56 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 22:58:56 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 22:59:01 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.565 seconds (process running for 6.451)
[INFO ] 25-09-29 23:00:48 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:00:48 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:00:48 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 23:00:49 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 23:00:49 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 23:00:49 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 23:00:49 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 23:00:49 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 23:00:49 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 23:00:49 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 23:00:49 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 23:00:49 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 23:00:49 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 23:00:49 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:00:49 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 23:00:49 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 23:00:49 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:00:49 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 23:00:49 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 23:00:49 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 23:00:49 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 23:00:49 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 23:00:49 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:00:49 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 23:00:49 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 23:00:49 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 23:00:49 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 23:00:49 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 23:00:49 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 23:00:49 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 23:00:49 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 23:00:49 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 23:00:49 [MyInterceptor:122] - running time: 1253(ms)
[INFO ] 25-09-29 23:01:39 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:01:39 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:01:39 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[INFO ] 25-09-29 23:01:39 [MyInterceptor:101] - - REFERER : time=50158, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[DEBUG] 25-09-29 23:01:39 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 23:01:39 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), scoop-shop(String)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'scoop-shop'

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|id    |variant_description_ko                               |id    |slug                    |name_ko  |description_ko           |is_new |slug       |list_slug               |name_ko |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|
|30031 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |scoop-shop |ice-cream-shop-flavours |스쿱 샵    |
|------|-----------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----------|------------------------|--------|

[DEBUG] 25-09-29 23:01:39 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:39 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 23:01:39 [selectVariantMedia:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30031
  ORDER BY role, sort_order

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|role     |url                                                                          |alt_ko        |sort_order |
|---------|-----------------------------------------------------------------------------|--------------|-----------|
|PACKSHOT |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/packshot/main.png    |체리 가르시아 스쿱 팩샷 |0          |
|GALLERY  |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/gallery/01-tower.png |null          |1          |
|---------|-----------------------------------------------------------------------------|--------------|-----------|

[DEBUG] 25-09-29 23:01:39 [selectVariantMedia:135] - <==      Total: 2
[DEBUG] 25-09-29 23:01:39 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 23:01:39 [selectVariantGallery:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30031
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|--------|-----------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                          |alt_ko |sort_order |
|--------|-----------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/gallery/01-tower.png |null   |1          |
|--------|-----------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 23:01:39 [selectVariantGallery:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:39 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 23:01:39 [selectVariantIngredients:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30031

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|ingredients_ko                                                                                                                   |smartlabel_url |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |null           |
|---------------------------------------------------------------------------------------------------------------------------------|---------------|

[DEBUG] 25-09-29 23:01:39 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:39 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 23:01:39 [selectVariantSourcing:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30031
ORDER BY vs.sort_order

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:01:39 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 23:01:39 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 23:01:39 [selectVariantCerts:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30031
ORDER BY vc.sort_order

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 23:01:39 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 23:01:39 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 23:01:39 [selectRecommendations:135] - ==> Parameters: 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30031
ORDER BY r.slot

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 23:01:39 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 23:01:39 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 23:01:39 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 23:01:39 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 23:01:39 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 23:01:39 [findNextVariant:135] - ==> Parameters: 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long), 30031(Long)
[INFO ] 25-09-29 23:01:39 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30031))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30031)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30031)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30031)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 23:01:39 [resultsettable:610] - 
|------|--------------------|-----------|
|id    |slug                |slug       |
|------|--------------------|-----------|
|30032 |chocolate-ice-cream |scoop-shop |
|------|--------------------|-----------|

[DEBUG] 25-09-29 23:01:39 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 23:01:39 [MyInterceptor:122] - running time: 257(ms)
[INFO ] 25-09-29 23:01:43 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:01:43 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:01:43 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[INFO ] 25-09-29 23:01:43 [MyInterceptor:101] - - REFERER : time=3917, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/scoop-shop
[DEBUG] 25-09-29 23:01:43 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 23:01:43 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), mini-cup(String)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'mini-cup'

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|id    |variant_description_ko                                                                                                                |id    |slug                    |name_ko  |description_ko           |is_new |slug     |list_slug      |name_ko |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|
|30023 |기타리스트인 제리 가르시아 (Jerry Garcia)와 그레이트 풀 데드 (Grateful Dead) 팬들에게 헌사하는 벤앤제리스의 대표 메뉴. 록 전설의 이름을 딴 최초의 아이스크림이자 벤앤제리스의 팬들이 추천하는 가장 유명한 맛입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |mini-cup |ice-cream-cups |미니컵     |
|------|--------------------------------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|---------|---------------|--------|

[DEBUG] 25-09-29 23:01:43 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:43 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 23:01:43 [selectVariantMedia:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30023
  ORDER BY role, sort_order

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/packshot/main.png    |체리 가르시아 미니컵 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/gallery/01-tower.png |null           |1          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/nutrition/120ml.png  |영양성분표 120ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 23:01:43 [selectVariantMedia:135] - <==      Total: 3
[DEBUG] 25-09-29 23:01:43 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 23:01:43 [selectVariantGallery:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30023
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/gallery/01-tower.png |null   |1          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 23:01:43 [selectVariantGallery:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:43 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 23:01:43 [selectVariantIngredients:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30023

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                           |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840200153-0003-en-US-1701785653440/index.html#nutrition |
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:01:43 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:43 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 23:01:43 [selectVariantSourcing:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30023
ORDER BY vs.sort_order

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:01:43 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 23:01:43 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 23:01:43 [selectVariantCerts:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30023
ORDER BY vc.sort_order

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|--------|---------|
|name_ko |icon_url |
|--------|---------|
|--------|---------|

[DEBUG] 25-09-29 23:01:43 [selectVariantCerts:135] - <==      Total: 0
[DEBUG] 25-09-29 23:01:43 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 23:01:43 [selectRecommendations:135] - ==> Parameters: 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30023
ORDER BY r.slot

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|---|-----|--------|-------|-----|----------|--------|----|
|id |slug |name_ko |is_new |slug |list_slug |name_ko |url |
|---|-----|--------|-------|-----|----------|--------|----|
|---|-----|--------|-------|-----|----------|--------|----|

[DEBUG] 25-09-29 23:01:43 [selectRecommendations:135] - <==      Total: 0
[DEBUG] 25-09-29 23:01:43 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 23:01:43 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 23:01:43 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 23:01:43 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 23:01:43 [findNextVariant:135] - ==> Parameters: 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long), 30023(Long)
[INFO ] 25-09-29 23:01:43 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30023))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30023)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30023)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30023)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 23:01:43 [resultsettable:610] - 
|------|--------------------------------------|---------|
|id    |slug                                  |slug     |
|------|--------------------------------------|---------|
|30022 |chocolate-chip-cookie-dough-ice-cream |mini-cup |
|------|--------------------------------------|---------|

[DEBUG] 25-09-29 23:01:43 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 23:01:43 [MyInterceptor:122] - running time: 205(ms)
[INFO ] 25-09-29 23:01:53 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:01:53 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:01:53 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[INFO ] 25-09-29 23:01:53 [MyInterceptor:101] - - REFERER : time=9845, url=http://localhost:8080/flavours/cherry-garcia-ice-cream/mini-cup
[DEBUG] 25-09-29 23:01:53 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 23:01:53 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 23:01:53 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:53 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 23:01:53 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 23:01:53 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 23:01:53 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 23:01:53 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 23:01:53 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 23:01:53 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 23:01:53 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:01:53 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:53 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 23:01:53 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:01:53 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 23:01:53 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 23:01:53 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 23:01:53 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 23:01:53 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 23:01:53 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:01:53 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 23:01:53 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 23:01:53 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 23:01:53 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 23:01:53 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 23:01:53 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 23:01:53 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 23:01:53 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 23:01:53 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 23:01:53 [MyInterceptor:122] - running time: 129(ms)
[INFO ] 25-09-29 23:03:04 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:03:04 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:03:04 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
[INFO ] 25-09-29 23:06:35 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 11987 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-09-29 23:06:35 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-09-29 23:06:35 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-09-29 23:06:40 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.541 seconds (process running for 6.332)
[INFO ] 25-09-29 23:06:52 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:06:52 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:06:52 [MyInterceptor:85] - [GET] http://localhost:8080/flavours/cherry-garcia-ice-cream/pint
[DEBUG] 25-09-29 23:06:53 [selectVariantDetail:135] - ==>  Preparing: SELECT v.id AS variantId, v.variant_description_ko AS variantDescriptionKo, f.id AS flavourId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND f.slug = ? AND c.slug = ?
[DEBUG] 25-09-29 23:06:53 [selectVariantDetail:135] - ==> Parameters: cherry-garcia-ice-cream(String), pint(String)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT v.id         AS variantId,
      v.variant_description_ko     AS variantDescriptionKo,
       f.id         AS flavourId,
       f.slug       AS flavourSlug,
       f.name_ko    AS flavourNameKo,
       f.description_ko AS flavourDescriptionKo,
       f.is_new     AS isNew,
       c.slug       AS categorySlug,
       c.list_slug  AS categoryListSlug,
       c.name_ko    AS categoryNameKo
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND f.slug = 'cherry-garcia-ice-cream'
  AND c.slug = 'pint'

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|id    |variant_description_ko                                                                                          |id    |slug                    |name_ko  |description_ko           |is_new |slug |list_slug       |name_ko |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|
|30006 |전세계 기타리스트 제리 가르시아와 그레이트풀 데드 팬들에게 바치는 먹을 수 있는 최고의 찬사를 보내며, 팬들이 제안한 맛으로 가장 유명한 전설적인 락 밴드의 이름을 따서 만든 최초의 아이스크림입니다. |20006 |cherry-garcia-ice-cream |체리 가르시아® |체리 퍼지 플레이크가 들어간 체리 아이스크림 |false  |pint |ice-cream-pints |파인트     |
|------|----------------------------------------------------------------------------------------------------------------|------|------------------------|---------|-------------------------|-------|-----|----------------|--------|

[DEBUG] 25-09-29 23:06:53 [selectVariantDetail:135] - <==      Total: 1
[DEBUG] 25-09-29 23:06:53 [selectVariantMedia:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? ORDER BY role, sort_order
[DEBUG] 25-09-29 23:06:53 [selectVariantMedia:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
  FROM variant_media
  WHERE variant_id = 30006
  ORDER BY role, sort_order

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|----------|---------------------------------------------------------------------------|---------------|-----------|
|role      |url                                                                        |alt_ko         |sort_order |
|----------|---------------------------------------------------------------------------|---------------|-----------|
|PACKSHOT  |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png        |체리 가르시아 파인트 팩샷 |0          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null           |1          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null           |2          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null           |3          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null           |4          |
|GALLERY   |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null           |5          |
|NUTRITION |/assets/img/flavours/cherry-garcia-ice-cream/pint/nutrition/473ml.png      |영양성분표 473ml    |0          |
|----------|---------------------------------------------------------------------------|---------------|-----------|

[DEBUG] 25-09-29 23:06:53 [selectVariantMedia:135] - <==      Total: 7
[DEBUG] 25-09-29 23:06:53 [selectVariantGallery:135] - ==>  Preparing: SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder FROM variant_media WHERE variant_id = ? AND role = 'GALLERY' ORDER BY sort_order
[DEBUG] 25-09-29 23:06:53 [selectVariantGallery:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT role, url, alt_ko AS altKo, sort_order AS sortOrder
FROM variant_media
WHERE variant_id = 30006
  AND role = 'GALLERY'
ORDER BY sort_order

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|--------|---------------------------------------------------------------------------|-------|-----------|
|role    |url                                                                        |alt_ko |sort_order |
|--------|---------------------------------------------------------------------------|-------|-----------|
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/01-tower.png     |null   |1          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/02-envirolid.jpg |null   |2          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/03-scooped.jpg   |null   |3          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/04-enviro.jpg    |null   |4          |
|GALLERY |/assets/img/flavours/cherry-garcia-ice-cream/pint/gallery/05-hero.jpg      |null   |5          |
|--------|---------------------------------------------------------------------------|-------|-----------|

[DEBUG] 25-09-29 23:06:53 [selectVariantGallery:135] - <==      Total: 5
[DEBUG] 25-09-29 23:06:53 [selectVariantIngredients:135] - ==>  Preparing: SELECT ingredients_ko as ingredientsKo, smartlabel_url as smartlabelUrl FROM variant_ingredients WHERE variant_id = ?
[DEBUG] 25-09-29 23:06:53 [selectVariantIngredients:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT ingredients_ko as ingredientsKo,
       smartlabel_url as smartlabelUrl
FROM variant_ingredients
WHERE variant_id = 30006

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|ingredients_ko                                                                                                                   |smartlabel_url                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|크림, 탈지유, 액상당(설탕, 물), 물, 체리, 설탕, 계란 노른자, 코코넛 오일, (알칼리로 처리한) 코코아, 과일 및 채소 농축액(색소), 코코아 파우더, 구아검, 천연착향료, 레몬 농축액, 카라기난, 유지방, 대두 레시틴. |https://smartlabel.scanbuy.com/3kDXaw4KiY2GQD9DU6973N/preview/076840100156-0002-en-US-1665758051552/index.html |
|---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:06:53 [selectVariantIngredients:135] - <==      Total: 1
[DEBUG] 25-09-29 23:06:53 [selectVariantSourcing:135] - ==>  Preparing: SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl FROM variant_sourcing vs JOIN sourcing_feature sf ON vs.feature_id = sf.id WHERE vs.variant_id = ? ORDER BY vs.sort_order
[DEBUG] 25-09-29 23:06:53 [selectVariantSourcing:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT sf.name_ko as nameKo, sf.icon_url as iconUrl
FROM variant_sourcing vs
JOIN sourcing_feature sf ON vs.feature_id = sf.id
WHERE vs.variant_id = 30006
ORDER BY vs.sort_order

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|------------------------------|----------------------------------------------------------------------------|
|name_ko                       |icon_url                                                                    |
|------------------------------|----------------------------------------------------------------------------|
|Non-GMO                       |/assets/img/misc/90001_Non-GMO_VLS_Simpler_Icons.avif                       |
|Cage-Free Eggs                |/assets/img/misc/90002_Cage-free_Eggs_VLS_Simpler_Icons.webp                |
|Fairtrade                     |/assets/img/misc/90004_Fairtrade_VLS_Simpler_Icons.avif                     |
|Caring Dairy                  |/assets/img/misc/90005_Caring_Dairy_VLS_Simpler_Icons.avif                  |
|Responsibly Sourced Packaging |/assets/img/misc/90006_Responsibly_Sourced_Packaging_VLS_Simpler_Icons.avif |
|------------------------------|----------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:06:53 [selectVariantSourcing:135] - <==      Total: 5
[DEBUG] 25-09-29 23:06:53 [selectVariantCerts:135] - ==>  Preparing: SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl FROM variant_cert vc JOIN dietary_cert dc ON vc.cert_id = dc.id WHERE vc.variant_id = ? ORDER BY vc.sort_order
[DEBUG] 25-09-29 23:06:53 [selectVariantCerts:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT dc.name_ko as nameKo, dc.icon_url as iconUrl
FROM variant_cert vc
JOIN dietary_cert dc ON vc.cert_id = dc.id
WHERE vc.variant_id = 30006
ORDER BY vc.sort_order

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|-------------|-----------------------------------------------------|
|name_ko      |icon_url                                             |
|-------------|-----------------------------------------------------|
|Kosher Dairy |/assets/img/misc/91002_Kosher_Dairy_Dietary_Icon.png |
|-------------|-----------------------------------------------------|

[DEBUG] 25-09-29 23:06:53 [selectVariantCerts:135] - <==      Total: 1
[DEBUG] 25-09-29 23:06:53 [selectRecommendations:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.slug as categorySlug, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM variant_reco r JOIN product_variant v ON r.target_variant_id = v.id JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE r.source_variant_id = ? ORDER BY r.slot
[DEBUG] 25-09-29 23:06:53 [selectRecommendations:135] - ==> Parameters: 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.slug as categorySlug,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM variant_reco r
JOIN product_variant v ON r.target_variant_id = v.id
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE r.source_variant_id = 30006
ORDER BY r.slot

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|id    |slug                                 |name_ko     |is_new |slug |list_slug       |name_ko |url                                                                              |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|
|30001 |chunky-monkey-ice-cream              |청키 몽키®      |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png              |
|30004 |strawberry-cheesecake-ice-cream      |스트로베리 치즈케이크 |true   |pint |ice-cream-pints |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png      |
|30010 |new-york-super-fudge-chunk-ice-cream |뉴욕 수퍼 퍼지 청크 |false  |pint |ice-cream-pints |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png |
|------|-------------------------------------|------------|-------|-----|----------------|--------|---------------------------------------------------------------------------------|

[DEBUG] 25-09-29 23:06:53 [selectRecommendations:135] - <==      Total: 3
[DEBUG] 25-09-29 23:06:53 [selectAvailableCategories:135] - ==>  Preparing: SELECT c.code, c.slug AS slug, c.name_ko AS nameKo, v.id AS variantId FROM product_variant v JOIN category c ON v.category_id = c.id WHERE v.flavour_id = ? AND v.is_active = 1 ORDER BY c.priority
[DEBUG] 25-09-29 23:06:53 [selectAvailableCategories:135] - ==> Parameters: 20006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT c.code,
       c.slug       AS slug,
       c.name_ko    AS nameKo,
       v.id         AS variantId
FROM product_variant v
JOIN category c ON v.category_id = c.id
WHERE v.flavour_id = 20006
  AND v.is_active = 1
ORDER BY c.priority

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|---------|-----------|--------|------|
|code     |slug       |name_ko |id    |
|---------|-----------|--------|------|
|PINT     |pint       |파인트     |30006 |
|MINI_CUP |mini-cup   |미니컵     |30023 |
|SCOOP    |scoop-shop |스쿱 샵    |30031 |
|---------|-----------|--------|------|

[DEBUG] 25-09-29 23:06:53 [selectAvailableCategories:135] - <==      Total: 3
[DEBUG] 25-09-29 23:06:53 [findNextVariant:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, c.slug as categorySlug FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id WHERE v.is_active = 1 AND ( (c.priority > (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?)) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id > (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) OR ( c.priority = (SELECT c2.priority FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id JOIN category c2 ON pv2.category_id = c2.id WHERE pv2.id = ?) AND f.flavour_type_id = (SELECT f2.flavour_type_id FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) AND f.name_ko > (SELECT f2.name_ko FROM product_variant pv2 JOIN flavour f2 ON pv2.flavour_id = f2.id WHERE pv2.id = ?) ) ) ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC LIMIT 1
[DEBUG] 25-09-29 23:06:53 [findNextVariant:135] - ==> Parameters: 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long), 30006(Long)
[INFO ] 25-09-29 23:06:53 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       c.slug as categorySlug
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
WHERE v.is_active = 1
  AND (
    (c.priority > (SELECT c2.priority
                   FROM product_variant pv2
                   JOIN flavour f2 ON pv2.flavour_id = f2.id
                   JOIN category c2 ON pv2.category_id = c2.id
                   WHERE pv2.id = 30006))
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id > (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
    )
    OR (
      c.priority = (SELECT c2.priority
                    FROM product_variant pv2
                    JOIN flavour f2 ON pv2.flavour_id = f2.id
                    JOIN category c2 ON pv2.category_id = c2.id
                    WHERE pv2.id = 30006)
      AND f.flavour_type_id = (SELECT f2.flavour_type_id
                               FROM product_variant pv2
                               JOIN flavour f2 ON pv2.flavour_id = f2.id
                               WHERE pv2.id = 30006)
      AND f.name_ko > (SELECT f2.name_ko
                       FROM product_variant pv2
                       JOIN flavour f2 ON pv2.flavour_id = f2.id
                       WHERE pv2.id = 30006)
    )
  )
ORDER BY c.priority ASC, f.flavour_type_id ASC, f.name_ko ASC
LIMIT 1

[INFO ] 25-09-29 23:06:53 [resultsettable:610] - 
|------|--------------------------------------|-----|
|id    |slug                                  |slug |
|------|--------------------------------------|-----|
|30005 |chocolate-chip-cookie-dough-ice-cream |pint |
|------|--------------------------------------|-----|

[DEBUG] 25-09-29 23:06:53 [findNextVariant:135] - <==      Total: 1
[INFO ] 25-09-29 23:06:53 [MyInterceptor:122] - running time: 1374(ms)
[INFO ] 25-09-29 23:06:54 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-09-29 23:06:54 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-09-29 23:06:54 [MyInterceptor:85] - [GET] http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json
