[INFO ] 25-11-24 12:39:32 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94550 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:39:32 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:39:32 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:39:36 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.278 seconds (process running for 6.525)
[INFO ] 25-11-24 12:40:23 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:23 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Safari 18.6
[INFO ] 25-11-24 12:40:23 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:40:30 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:30 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:40:30 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:40:32 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:32 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:40:32 [MyInterceptor:85] - [GET] http://localhost:8080/search?q=%3F
[INFO ] 25-11-24 12:40:32 [MyInterceptor:92] - (param) <-- q = ?
[DEBUG] 25-11-24 12:40:33 [searchFlavoursAll:135] - ==>  Preparing: WITH kw AS ( SELECT TRIM(?) AS q, REPLACE(TRIM(?), '®', '') AS q_clean, LOWER(REPLACE(TRIM(?), ' ', '-')) AS q_slug, CONCAT(TRIM(?), '%') AS q_prefix, CONCAT('%', TRIM(?), '%') AS q_like, CONCAT(REPLACE(TRIM(?), '®', ''), '%') AS q_clean_prefix, CONCAT('%', REPLACE(TRIM(?), '®', ''), '%') AS q_clean_like, CONCAT(LOWER(REPLACE(TRIM(?), ' ', '-')), '%') AS q_slug_prefix, CONCAT('%', LOWER(REPLACE(TRIM(?), ' ', '-')), '%') AS q_slug_like ), base AS ( /* 이름/별칭/슬러그 매칭 + 가중치 */ SELECT f.id AS flavour_id, 100 AS score FROM flavour f, kw WHERE f.is_active = 1 AND f.name_ko = kw.q UNION ALL SELECT f.id, 98 FROM flavour f, kw WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') = kw.q_clean UNION ALL SELECT f.id, 97 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug = kw.q_slug UNION ALL SELECT f.id, 95 FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id JOIN tag_alias ta ON ta.tag_id=ft.tag_id, kw WHERE f.is_active = 1 AND ta.alias = kw.q UNION ALL SELECT f.id, 90 FROM flavour f, kw WHERE f.is_active = 1 AND f.name_ko LIKE kw.q_prefix UNION ALL SELECT f.id, 88 FROM flavour f, kw WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') LIKE kw.q_clean_prefix UNION ALL SELECT f.id, 87 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_prefix UNION ALL SELECT f.id, 82 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_like UNION ALL SELECT f.id, 80 FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id JOIN tag_alias ta ON ta.tag_id=ft.tag_id, kw WHERE f.is_active = 1 AND ta.alias LIKE kw.q_like ), ranked AS ( SELECT flavour_id, MAX(score) AS score FROM base GROUP BY flavour_id ) SELECT v.id AS variantId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo, vm_p.url AS imageUrl, f.flavour_type_id AS flavourTypeId, ft.code AS flavourTypeCode FROM ranked r JOIN flavour f ON f.id = r.flavour_id JOIN product_variant v ON v.is_active = 1 AND v.flavour_id = f.id AND v.id = ( SELECT pv.id FROM product_variant pv JOIN category c2 ON c2.id = pv.category_id WHERE pv.is_active = 1 AND pv.flavour_id = f.id ORDER BY c2.priority ASC, COALESCE(pv.sort_order, 999), pv.id LIMIT 1 ) JOIN category c ON c.id = v.category_id LEFT JOIN flavour_type ft ON ft.id = f.flavour_type_id LEFT JOIN variant_media vm_p ON vm_p.variant_id = v.id AND vm_p.role = 'PACKSHOT' ORDER BY r.score DESC, CASE WHEN f.is_new = 1 THEN 0 ELSE 1 END, f.flavour_type_id ASC, f.name_ko ASC
[DEBUG] 25-11-24 12:40:33 [searchFlavoursAll:135] - ==> Parameters: ?(String), ?(String), ?(String), ?(String), ?(String), ?(String), ?(String), ?(String), ?(String)
[INFO ] 25-11-24 12:40:33 [sqlonly:228] - WITH
kw AS (
SELECT
TRIM('?')                               AS q,
REPLACE(TRIM('?'), '®', '')             AS q_clean,
LOWER(REPLACE(TRIM('?'), ' ', '-'))     AS q_slug,
CONCAT(TRIM('?'), '%')                  AS q_prefix,
CONCAT('%', TRIM('?'), '%')             AS q_like,
CONCAT(REPLACE(TRIM('?'), '®', ''), '%')       AS q_clean_prefix,
CONCAT('%', REPLACE(TRIM('?'), '®', ''), '%')  AS q_clean_like,
CONCAT(LOWER(REPLACE(TRIM('?'), ' ', '-')), '%')     AS q_slug_prefix,
CONCAT('%', LOWER(REPLACE(TRIM('?'), ' ', '-')), '%') AS q_slug_like
),
base AS (
/* 이름/별칭/슬러그 매칭 + 가중치 */
SELECT f.id AS flavour_id, 100 AS score
FROM flavour f, kw
WHERE f.is_active = 1 AND f.name_ko = kw.q
UNION ALL
SELECT f.id, 98 FROM flavour f, kw
WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') = kw.q_clean
UNION ALL
SELECT f.id, 97 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug = kw.q_slug
UNION ALL
SELECT f.id, 95
FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id
           JOIN tag_alias ta   ON ta.tag_id=ft.tag_id, kw
WHERE f.is_active = 1 AND ta.alias = kw.q
UNION ALL
SELECT f.id, 90 FROM flavour f, kw
WHERE f.is_active = 1 AND f.name_ko LIKE kw.q_prefix
UNION ALL
SELECT f.id, 88 FROM flavour f, kw
WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') LIKE kw.q_clean_prefix
UNION ALL
SELECT f.id, 87 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_prefix
UNION ALL
SELECT f.id, 82 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_like
UNION ALL
SELECT f.id, 80
FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id
           JOIN tag_alias ta   ON ta.tag_id=ft.tag_id, kw
WHERE f.is_active = 1 AND ta.alias LIKE kw.q_like
),
ranked AS (
SELECT flavour_id, MAX(score) AS score
FROM base
GROUP BY flavour_id
)
SELECT
v.id                AS variantId,
f.slug              AS flavourSlug,
f.name_ko           AS flavourNameKo,
f.description_ko        AS flavourDescriptionKo,
f.is_new            AS isNew,
c.slug              AS categorySlug,
c.list_slug         AS categoryListSlug,
c.name_ko           AS categoryNameKo,
vm_p.url AS imageUrl,
f.flavour_type_id   AS flavourTypeId,
ft.code             AS flavourTypeCode
FROM ranked r
JOIN flavour f         ON f.id = r.flavour_id
JOIN product_variant v ON v.is_active = 1
                AND v.flavour_id = f.id
                AND v.id = (
                  SELECT pv.id
                  FROM product_variant pv
                  JOIN category c2 ON c2.id = pv.category_id
                  WHERE pv.is_active = 1
                    AND pv.flavour_id = f.id
                  ORDER BY c2.priority ASC, COALESCE(pv.sort_order, 999), pv.id
                  LIMIT 1
                )
JOIN category c        ON c.id = v.category_id
LEFT JOIN flavour_type ft ON ft.id = f.flavour_type_id
LEFT JOIN variant_media vm_p
ON vm_p.variant_id = v.id AND vm_p.role = 'PACKSHOT'
ORDER BY
r.score DESC,
CASE WHEN f.is_new = 1 THEN 0 ELSE 1 END,
f.flavour_type_id ASC,
f.name_ko ASC

[INFO ] 25-11-24 12:40:33 [resultsettable:610] - 
|---|-----|--------|---------------|-------|-----|----------|--------|----|----------------|-----|
|id |slug |name_ko |description_ko |is_new |slug |list_slug |name_ko |url |flavour_type_id |code |
|---|-----|--------|---------------|-------|-----|----------|--------|----|----------------|-----|
|---|-----|--------|---------------|-------|-----|----------|--------|----|----------------|-----|

[DEBUG] 25-11-24 12:40:33 [searchFlavoursAll:135] - <==      Total: 0
[INFO ] 25-11-24 12:40:33 [MyInterceptor:122] - running time: 827(ms)
[ERROR] 25-11-24 12:40:33 [TemplateEngine:1141] - [THYMELEAF][http-nio-8080-exec-9] Exception processing template "flavours/search-results": An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "q != null && #strings.isNotEmpty(q) ? ('“' + q + '” 에 대한 결과가 없어요.') : '검색어를 입력해 주세요.'" (template: "flavours/search-results" - line 238, col 51)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 56 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "q != null && #strings.isNotEmpty(q) ? ('“' + q + '” 에 대한 결과가 없어요.') : '검색어를 입력해 주세요.'" (template: "flavours/search-results" - line 238, col 51)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 58 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1004E: Method call: Method isNotEmpty(java.lang.String) cannot be found on type org.thymeleaf.expression.Strings
	at org.springframework.expression.spel.ast.MethodReference.findAccessorForMethod(MethodReference.java:238)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:148)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:398)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.OpAnd.getBooleanValue(OpAnd.java:58)
	at org.springframework.expression.spel.ast.OpAnd.getValueInternal(OpAnd.java:53)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.Ternary.getValueInternal(Ternary.java:54)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 77 common frames omitted
[ERROR] 25-11-24 12:40:33 [[dispatcherServlet]:170] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1004E: Method call: Method isNotEmpty(java.lang.String) cannot be found on type org.thymeleaf.expression.Strings
	at org.springframework.expression.spel.ast.MethodReference.findAccessorForMethod(MethodReference.java:238)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:148)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:398)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.OpAnd.getBooleanValue(OpAnd.java:58)
	at org.springframework.expression.spel.ast.OpAnd.getValueInternal(OpAnd.java:53)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.Ternary.getValueInternal(Ternary.java:54)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
[ERROR] 25-11-24 12:40:33 [ErrorMvcAutoConfiguration$StaticView:202] - Cannot render error page for request [/search] and exception [An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")] as the response has already been committed. As a result, the response may have the wrong status code.
[INFO ] 25-11-24 12:40:35 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:35 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:40:35 [MyInterceptor:85] - [GET] http://localhost:8080/search?q=%3F
[INFO ] 25-11-24 12:40:35 [MyInterceptor:92] - (param) <-- q = ?
[DEBUG] 25-11-24 12:40:35 [searchFlavoursAll:135] - ==>  Preparing: WITH kw AS ( SELECT TRIM(?) AS q, REPLACE(TRIM(?), '®', '') AS q_clean, LOWER(REPLACE(TRIM(?), ' ', '-')) AS q_slug, CONCAT(TRIM(?), '%') AS q_prefix, CONCAT('%', TRIM(?), '%') AS q_like, CONCAT(REPLACE(TRIM(?), '®', ''), '%') AS q_clean_prefix, CONCAT('%', REPLACE(TRIM(?), '®', ''), '%') AS q_clean_like, CONCAT(LOWER(REPLACE(TRIM(?), ' ', '-')), '%') AS q_slug_prefix, CONCAT('%', LOWER(REPLACE(TRIM(?), ' ', '-')), '%') AS q_slug_like ), base AS ( /* 이름/별칭/슬러그 매칭 + 가중치 */ SELECT f.id AS flavour_id, 100 AS score FROM flavour f, kw WHERE f.is_active = 1 AND f.name_ko = kw.q UNION ALL SELECT f.id, 98 FROM flavour f, kw WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') = kw.q_clean UNION ALL SELECT f.id, 97 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug = kw.q_slug UNION ALL SELECT f.id, 95 FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id JOIN tag_alias ta ON ta.tag_id=ft.tag_id, kw WHERE f.is_active = 1 AND ta.alias = kw.q UNION ALL SELECT f.id, 90 FROM flavour f, kw WHERE f.is_active = 1 AND f.name_ko LIKE kw.q_prefix UNION ALL SELECT f.id, 88 FROM flavour f, kw WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') LIKE kw.q_clean_prefix UNION ALL SELECT f.id, 87 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_prefix UNION ALL SELECT f.id, 82 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_like UNION ALL SELECT f.id, 80 FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id JOIN tag_alias ta ON ta.tag_id=ft.tag_id, kw WHERE f.is_active = 1 AND ta.alias LIKE kw.q_like ), ranked AS ( SELECT flavour_id, MAX(score) AS score FROM base GROUP BY flavour_id ) SELECT v.id AS variantId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo, vm_p.url AS imageUrl, f.flavour_type_id AS flavourTypeId, ft.code AS flavourTypeCode FROM ranked r JOIN flavour f ON f.id = r.flavour_id JOIN product_variant v ON v.is_active = 1 AND v.flavour_id = f.id AND v.id = ( SELECT pv.id FROM product_variant pv JOIN category c2 ON c2.id = pv.category_id WHERE pv.is_active = 1 AND pv.flavour_id = f.id ORDER BY c2.priority ASC, COALESCE(pv.sort_order, 999), pv.id LIMIT 1 ) JOIN category c ON c.id = v.category_id LEFT JOIN flavour_type ft ON ft.id = f.flavour_type_id LEFT JOIN variant_media vm_p ON vm_p.variant_id = v.id AND vm_p.role = 'PACKSHOT' ORDER BY r.score DESC, CASE WHEN f.is_new = 1 THEN 0 ELSE 1 END, f.flavour_type_id ASC, f.name_ko ASC
[DEBUG] 25-11-24 12:40:35 [searchFlavoursAll:135] - ==> Parameters: ?(String), ?(String), ?(String), ?(String), ?(String), ?(String), ?(String), ?(String), ?(String)
[INFO ] 25-11-24 12:40:35 [sqlonly:228] - WITH
kw AS (
SELECT
TRIM('?')                               AS q,
REPLACE(TRIM('?'), '®', '')             AS q_clean,
LOWER(REPLACE(TRIM('?'), ' ', '-'))     AS q_slug,
CONCAT(TRIM('?'), '%')                  AS q_prefix,
CONCAT('%', TRIM('?'), '%')             AS q_like,
CONCAT(REPLACE(TRIM('?'), '®', ''), '%')       AS q_clean_prefix,
CONCAT('%', REPLACE(TRIM('?'), '®', ''), '%')  AS q_clean_like,
CONCAT(LOWER(REPLACE(TRIM('?'), ' ', '-')), '%')     AS q_slug_prefix,
CONCAT('%', LOWER(REPLACE(TRIM('?'), ' ', '-')), '%') AS q_slug_like
),
base AS (
/* 이름/별칭/슬러그 매칭 + 가중치 */
SELECT f.id AS flavour_id, 100 AS score
FROM flavour f, kw
WHERE f.is_active = 1 AND f.name_ko = kw.q
UNION ALL
SELECT f.id, 98 FROM flavour f, kw
WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') = kw.q_clean
UNION ALL
SELECT f.id, 97 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug = kw.q_slug
UNION ALL
SELECT f.id, 95
FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id
           JOIN tag_alias ta   ON ta.tag_id=ft.tag_id, kw
WHERE f.is_active = 1 AND ta.alias = kw.q
UNION ALL
SELECT f.id, 90 FROM flavour f, kw
WHERE f.is_active = 1 AND f.name_ko LIKE kw.q_prefix
UNION ALL
SELECT f.id, 88 FROM flavour f, kw
WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') LIKE kw.q_clean_prefix
UNION ALL
SELECT f.id, 87 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_prefix
UNION ALL
SELECT f.id, 82 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_like
UNION ALL
SELECT f.id, 80
FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id
           JOIN tag_alias ta   ON ta.tag_id=ft.tag_id, kw
WHERE f.is_active = 1 AND ta.alias LIKE kw.q_like
),
ranked AS (
SELECT flavour_id, MAX(score) AS score
FROM base
GROUP BY flavour_id
)
SELECT
v.id                AS variantId,
f.slug              AS flavourSlug,
f.name_ko           AS flavourNameKo,
f.description_ko        AS flavourDescriptionKo,
f.is_new            AS isNew,
c.slug              AS categorySlug,
c.list_slug         AS categoryListSlug,
c.name_ko           AS categoryNameKo,
vm_p.url AS imageUrl,
f.flavour_type_id   AS flavourTypeId,
ft.code             AS flavourTypeCode
FROM ranked r
JOIN flavour f         ON f.id = r.flavour_id
JOIN product_variant v ON v.is_active = 1
                AND v.flavour_id = f.id
                AND v.id = (
                  SELECT pv.id
                  FROM product_variant pv
                  JOIN category c2 ON c2.id = pv.category_id
                  WHERE pv.is_active = 1
                    AND pv.flavour_id = f.id
                  ORDER BY c2.priority ASC, COALESCE(pv.sort_order, 999), pv.id
                  LIMIT 1
                )
JOIN category c        ON c.id = v.category_id
LEFT JOIN flavour_type ft ON ft.id = f.flavour_type_id
LEFT JOIN variant_media vm_p
ON vm_p.variant_id = v.id AND vm_p.role = 'PACKSHOT'
ORDER BY
r.score DESC,
CASE WHEN f.is_new = 1 THEN 0 ELSE 1 END,
f.flavour_type_id ASC,
f.name_ko ASC

[INFO ] 25-11-24 12:40:35 [resultsettable:610] - 
|---|-----|--------|---------------|-------|-----|----------|--------|----|----------------|-----|
|id |slug |name_ko |description_ko |is_new |slug |list_slug |name_ko |url |flavour_type_id |code |
|---|-----|--------|---------------|-------|-----|----------|--------|----|----------------|-----|
|---|-----|--------|---------------|-------|-----|----------|--------|----|----------------|-----|

[DEBUG] 25-11-24 12:40:35 [searchFlavoursAll:135] - <==      Total: 0
[INFO ] 25-11-24 12:40:35 [MyInterceptor:122] - running time: 136(ms)
[ERROR] 25-11-24 12:40:35 [TemplateEngine:1141] - [THYMELEAF][http-nio-8080-exec-3] Exception processing template "flavours/search-results": An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "q != null && #strings.isNotEmpty(q) ? ('“' + q + '” 에 대한 결과가 없어요.') : '검색어를 입력해 주세요.'" (template: "flavours/search-results" - line 238, col 51)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 56 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "q != null && #strings.isNotEmpty(q) ? ('“' + q + '” 에 대한 결과가 없어요.') : '검색어를 입력해 주세요.'" (template: "flavours/search-results" - line 238, col 51)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 58 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1004E: Method call: Method isNotEmpty(java.lang.String) cannot be found on type org.thymeleaf.expression.Strings
	at org.springframework.expression.spel.ast.MethodReference.findAccessorForMethod(MethodReference.java:238)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:148)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:398)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.OpAnd.getBooleanValue(OpAnd.java:58)
	at org.springframework.expression.spel.ast.OpAnd.getValueInternal(OpAnd.java:53)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.Ternary.getValueInternal(Ternary.java:54)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 77 common frames omitted
[ERROR] 25-11-24 12:40:35 [[dispatcherServlet]:170] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1004E: Method call: Method isNotEmpty(java.lang.String) cannot be found on type org.thymeleaf.expression.Strings
	at org.springframework.expression.spel.ast.MethodReference.findAccessorForMethod(MethodReference.java:238)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:148)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:398)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.OpAnd.getBooleanValue(OpAnd.java:58)
	at org.springframework.expression.spel.ast.OpAnd.getValueInternal(OpAnd.java:53)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:203)
	at org.springframework.expression.spel.ast.Ternary.getValueInternal(Ternary.java:54)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1438)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1168)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
[ERROR] 25-11-24 12:40:35 [ErrorMvcAutoConfiguration$StaticView:202] - Cannot render error page for request [/search] and exception [An error happened during template parsing (template: "class path resource [templates/flavours/search-results.html]")] as the response has already been committed. As a result, the response may have the wrong status code.
[INFO ] 25-11-24 12:40:39 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:39 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:40:39 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:40:49 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:49 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:40:49 [MyInterceptor:85] - [GET] http://localhost:8080/search?q=%EB%94%B8%EA%B8%B0
[INFO ] 25-11-24 12:40:49 [MyInterceptor:92] - (param) <-- q = 딸기
[DEBUG] 25-11-24 12:40:49 [searchFlavoursAll:135] - ==>  Preparing: WITH kw AS ( SELECT TRIM(?) AS q, REPLACE(TRIM(?), '®', '') AS q_clean, LOWER(REPLACE(TRIM(?), ' ', '-')) AS q_slug, CONCAT(TRIM(?), '%') AS q_prefix, CONCAT('%', TRIM(?), '%') AS q_like, CONCAT(REPLACE(TRIM(?), '®', ''), '%') AS q_clean_prefix, CONCAT('%', REPLACE(TRIM(?), '®', ''), '%') AS q_clean_like, CONCAT(LOWER(REPLACE(TRIM(?), ' ', '-')), '%') AS q_slug_prefix, CONCAT('%', LOWER(REPLACE(TRIM(?), ' ', '-')), '%') AS q_slug_like ), base AS ( /* 이름/별칭/슬러그 매칭 + 가중치 */ SELECT f.id AS flavour_id, 100 AS score FROM flavour f, kw WHERE f.is_active = 1 AND f.name_ko = kw.q UNION ALL SELECT f.id, 98 FROM flavour f, kw WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') = kw.q_clean UNION ALL SELECT f.id, 97 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug = kw.q_slug UNION ALL SELECT f.id, 95 FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id JOIN tag_alias ta ON ta.tag_id=ft.tag_id, kw WHERE f.is_active = 1 AND ta.alias = kw.q UNION ALL SELECT f.id, 90 FROM flavour f, kw WHERE f.is_active = 1 AND f.name_ko LIKE kw.q_prefix UNION ALL SELECT f.id, 88 FROM flavour f, kw WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') LIKE kw.q_clean_prefix UNION ALL SELECT f.id, 87 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_prefix UNION ALL SELECT f.id, 82 FROM flavour f, kw WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_like UNION ALL SELECT f.id, 80 FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id JOIN tag_alias ta ON ta.tag_id=ft.tag_id, kw WHERE f.is_active = 1 AND ta.alias LIKE kw.q_like ), ranked AS ( SELECT flavour_id, MAX(score) AS score FROM base GROUP BY flavour_id ) SELECT v.id AS variantId, f.slug AS flavourSlug, f.name_ko AS flavourNameKo, f.description_ko AS flavourDescriptionKo, f.is_new AS isNew, c.slug AS categorySlug, c.list_slug AS categoryListSlug, c.name_ko AS categoryNameKo, vm_p.url AS imageUrl, f.flavour_type_id AS flavourTypeId, ft.code AS flavourTypeCode FROM ranked r JOIN flavour f ON f.id = r.flavour_id JOIN product_variant v ON v.is_active = 1 AND v.flavour_id = f.id AND v.id = ( SELECT pv.id FROM product_variant pv JOIN category c2 ON c2.id = pv.category_id WHERE pv.is_active = 1 AND pv.flavour_id = f.id ORDER BY c2.priority ASC, COALESCE(pv.sort_order, 999), pv.id LIMIT 1 ) JOIN category c ON c.id = v.category_id LEFT JOIN flavour_type ft ON ft.id = f.flavour_type_id LEFT JOIN variant_media vm_p ON vm_p.variant_id = v.id AND vm_p.role = 'PACKSHOT' ORDER BY r.score DESC, CASE WHEN f.is_new = 1 THEN 0 ELSE 1 END, f.flavour_type_id ASC, f.name_ko ASC
[DEBUG] 25-11-24 12:40:49 [searchFlavoursAll:135] - ==> Parameters: 딸기(String), 딸기(String), 딸기(String), 딸기(String), 딸기(String), 딸기(String), 딸기(String), 딸기(String), 딸기(String)
[INFO ] 25-11-24 12:40:49 [sqlonly:228] - WITH
kw AS (
SELECT
TRIM('딸기')                               AS q,
REPLACE(TRIM('딸기'), '®', '')             AS q_clean,
LOWER(REPLACE(TRIM('딸기'), ' ', '-'))     AS q_slug,
CONCAT(TRIM('딸기'), '%')                  AS q_prefix,
CONCAT('%', TRIM('딸기'), '%')             AS q_like,
CONCAT(REPLACE(TRIM('딸기'), '®', ''), '%')       AS q_clean_prefix,
CONCAT('%', REPLACE(TRIM('딸기'), '®', ''), '%')  AS q_clean_like,
CONCAT(LOWER(REPLACE(TRIM('딸기'), ' ', '-')), '%')     AS q_slug_prefix,
CONCAT('%', LOWER(REPLACE(TRIM('딸기'), ' ', '-')), '%') AS q_slug_like
),
base AS (
/* 이름/별칭/슬러그 매칭 + 가중치 */
SELECT f.id AS flavour_id, 100 AS score
FROM flavour f, kw
WHERE f.is_active = 1 AND f.name_ko = kw.q
UNION ALL
SELECT f.id, 98 FROM flavour f, kw
WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') = kw.q_clean
UNION ALL
SELECT f.id, 97 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug = kw.q_slug
UNION ALL
SELECT f.id, 95
FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id
           JOIN tag_alias ta   ON ta.tag_id=ft.tag_id, kw
WHERE f.is_active = 1 AND ta.alias = kw.q
UNION ALL
SELECT f.id, 90 FROM flavour f, kw
WHERE f.is_active = 1 AND f.name_ko LIKE kw.q_prefix
UNION ALL
SELECT f.id, 88 FROM flavour f, kw
WHERE f.is_active = 1 AND REPLACE(f.name_ko,'®','') LIKE kw.q_clean_prefix
UNION ALL
SELECT f.id, 87 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_prefix
UNION ALL
SELECT f.id, 82 FROM flavour f, kw
WHERE f.is_active = 1 AND f.slug LIKE kw.q_slug_like
UNION ALL
SELECT f.id, 80
FROM flavour f JOIN flavour_tag ft ON ft.flavour_id=f.id
           JOIN tag_alias ta   ON ta.tag_id=ft.tag_id, kw
WHERE f.is_active = 1 AND ta.alias LIKE kw.q_like
),
ranked AS (
SELECT flavour_id, MAX(score) AS score
FROM base
GROUP BY flavour_id
)
SELECT
v.id                AS variantId,
f.slug              AS flavourSlug,
f.name_ko           AS flavourNameKo,
f.description_ko        AS flavourDescriptionKo,
f.is_new            AS isNew,
c.slug              AS categorySlug,
c.list_slug         AS categoryListSlug,
c.name_ko           AS categoryNameKo,
vm_p.url AS imageUrl,
f.flavour_type_id   AS flavourTypeId,
ft.code             AS flavourTypeCode
FROM ranked r
JOIN flavour f         ON f.id = r.flavour_id
JOIN product_variant v ON v.is_active = 1
                AND v.flavour_id = f.id
                AND v.id = (
                  SELECT pv.id
                  FROM product_variant pv
                  JOIN category c2 ON c2.id = pv.category_id
                  WHERE pv.is_active = 1
                    AND pv.flavour_id = f.id
                  ORDER BY c2.priority ASC, COALESCE(pv.sort_order, 999), pv.id
                  LIMIT 1
                )
JOIN category c        ON c.id = v.category_id
LEFT JOIN flavour_type ft ON ft.id = f.flavour_type_id
LEFT JOIN variant_media vm_p
ON vm_p.variant_id = v.id AND vm_p.role = 'PACKSHOT'
ORDER BY
r.score DESC,
CASE WHEN f.is_new = 1 THEN 0 ELSE 1 END,
f.flavour_type_id ASC,
f.name_ko ASC

[INFO ] 25-11-24 12:40:49 [resultsettable:610] - 
|------|--------------------------------|------------|-----------------------------------|-------|-----------|------------------------|--------|----------------------------------------------------------------------------|----------------|-------------------|
|id    |slug                            |name_ko     |description_ko                     |is_new |slug       |list_slug               |name_ko |url                                                                         |flavour_type_id |code               |
|------|--------------------------------|------------|-----------------------------------|-------|-----------|------------------------|--------|----------------------------------------------------------------------------|----------------|-------------------|
|30004 |strawberry-cheesecake-ice-cream |스트로베리 치즈케이크 |그라함 크래커 스월이 가득한 스트로베리 치즈케이크 아이스크림  |true   |pint       |ice-cream-pints         |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png |1               |ORIGINAL ICE CREAM |
|30040 |strawberry-ice-cream            |스트로베리       |딸기 아이스크림 베이스에 딸기 과육이 듬뿍 들어있는 아이스크림 |false  |scoop-shop |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/strawberry-ice-cream/scoop-shop/packshot/main.png      |1               |ORIGINAL ICE CREAM |
|------|--------------------------------|------------|-----------------------------------|-------|-----------|------------------------|--------|----------------------------------------------------------------------------|----------------|-------------------|

[DEBUG] 25-11-24 12:40:49 [searchFlavoursAll:135] - <==      Total: 2
[INFO ] 25-11-24 12:40:49 [MyInterceptor:122] - running time: 148(ms)
[INFO ] 25-11-24 12:40:51 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:40:51 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:40:51 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:40:51 [MyInterceptor:101] - - REFERER : time=2082, url=http://localhost:8080/search?q=%EB%94%B8%EA%B8%B0
[INFO ] 25-11-24 12:41:01 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:41:01 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:41:01 [MyInterceptor:85] - [GET] http://localhost:8080/home
[INFO ] 25-11-24 12:41:01 [MyInterceptor:122] - running time: 66(ms)
[INFO ] 25-11-24 12:41:04 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:41:04 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:41:04 [MyInterceptor:85] - [GET] http://localhost:8080/flavours
[INFO ] 25-11-24 12:41:04 [MyInterceptor:101] - - REFERER : time=2361, url=http://localhost:8080/home
[DEBUG] 25-11-24 12:41:04 [selectAllFlavours:135] - ==>  Preparing: SELECT v.id as variantId, f.slug as flavourSlug, f.name_ko as flavourNameKo, f.is_new as isNew, c.list_slug as categoryListSlug, c.name_ko as categoryNameKo, vm.url as imageUrl FROM product_variant v JOIN flavour f ON v.flavour_id = f.id JOIN category c ON v.category_id = c.id LEFT JOIN variant_media vm ON vm.variant_id = v.id AND vm.role = 'PACKSHOT' WHERE v.is_active = 1 ORDER BY c.priority ASC, f.flavour_sort_rank ASC, f.name_ko ASC
[DEBUG] 25-11-24 12:41:04 [selectAllFlavours:135] - ==> Parameters: 
[INFO ] 25-11-24 12:41:04 [sqlonly:228] - SELECT v.id as variantId,
       f.slug as flavourSlug,
       f.name_ko as flavourNameKo,
       f.is_new as isNew,
       c.list_slug as categoryListSlug,
       c.name_ko as categoryNameKo,
       vm.url as imageUrl
FROM product_variant v
JOIN flavour f ON v.flavour_id = f.id
JOIN category c ON v.category_id = c.id
LEFT JOIN variant_media vm
       ON vm.variant_id = v.id AND vm.role = 'PACKSHOT'
WHERE v.is_active = 1
ORDER BY c.priority ASC, f.flavour_sort_rank ASC, f.name_ko ASC

[INFO ] 25-11-24 12:41:04 [resultsettable:610] - 
|------|---------------------------------------|----------------|-------|------------------------|--------|----------------------------------------------------------------------------------------|
|id    |slug                                   |name_ko         |is_new |list_slug               |name_ko |url                                                                                     |
|------|---------------------------------------|----------------|-------|------------------------|--------|----------------------------------------------------------------------------------------|
|30004 |strawberry-cheesecake-ice-cream        |스트로베리 치즈케이크     |true   |ice-cream-pints         |파인트     |/assets/img/flavours/strawberry-cheesecake-ice-cream/pint/packshot/main.png             |
|30010 |new-york-super-fudge-chunk-ice-cream   |뉴욕 수퍼 퍼지 청크     |false  |ice-cream-pints         |파인트     |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/pint/packshot/main.png        |
|30009 |mint-chocolate-cookie-ice-cream        |민트 초콜릿 칩 쿠키     |false  |ice-cream-pints         |파인트     |/assets/img/flavours/mint-chocolate-cookie-ice-cream/pint/packshot/main.png             |
|30013 |vanilla-ice-cream                      |바닐라             |false  |ice-cream-pints         |파인트     |/assets/img/flavours/vanilla-ice-cream/pint/packshot/main.png                           |
|30001 |chunky-monkey-ice-cream                |청키 몽키®          |false  |ice-cream-pints         |파인트     |/assets/img/flavours/chunky-monkey-ice-cream/pint/packshot/main.png                     |
|30006 |cherry-garcia-ice-cream                |체리 가르시아®        |false  |ice-cream-pints         |파인트     |/assets/img/flavours/cherry-garcia-ice-cream/pint/packshot/main.png                     |
|30005 |chocolate-chip-cookie-dough-ice-cream  |초콜릿 칩 쿠키 도우     |false  |ice-cream-pints         |파인트     |/assets/img/flavours/chocolate-chip-cookie-dough-ice-cream/pint/packshot/main.png       |
|30003 |chocolate-fudge-brownie-ice-cream      |초콜릿 퍼지 브라우니     |false  |ice-cream-pints         |파인트     |/assets/img/flavours/chocolate-fudge-brownie-ice-cream/pint/packshot/main.png           |
|30007 |coffee-coffee-buzz-buzz-buzz-ice-cream |커피커피 버즈버즈버즈!    |false  |ice-cream-pints         |파인트     |/assets/img/flavours/coffee-coffee-buzz-buzz-buzz-ice-cream/pint/packshot/main.png      |
|30011 |peanut-butter-cup-ice-cream            |피넛 버터 컵         |false  |ice-cream-pints         |파인트     |/assets/img/flavours/peanut-butter-cup-ice-cream/pint/packshot/main.png                 |
|30012 |pistachio-pistachio-ice-cream          |피스타치오 피스타치오     |false  |ice-cream-pints         |파인트     |/assets/img/flavours/pistachio-pistachio-ice-cream/pint/packshot/main.png               |
|30002 |half-baked-ice-cream                   |하프베이크드®         |false  |ice-cream-pints         |파인트     |/assets/img/flavours/half-baked-ice-cream/pint/packshot/main.png                        |
|30008 |karamel-sutra-core                     |카라멜 수트라         |false  |ice-cream-pints         |파인트     |/assets/img/flavours/karamel-sutra-core/pint/packshot/main.png                          |
|30023 |cherry-garcia-ice-cream                |체리 가르시아®        |false  |ice-cream-cups          |미니컵     |/assets/img/flavours/cherry-garcia-ice-cream/mini-cup/packshot/main.png                 |
|30022 |chocolate-chip-cookie-dough-ice-cream  |초콜릿 칩 쿠키 도우     |false  |ice-cream-cups          |미니컵     |/assets/img/flavours/chocolate-chip-cookie-dough-ice-cream/mini-cup/packshot/main.png   |
|30021 |chocolate-fudge-brownie-ice-cream      |초콜릿 퍼지 브라우니     |false  |ice-cream-cups          |미니컵     |/assets/img/flavours/chocolate-fudge-brownie-ice-cream/mini-cup/packshot/main.png       |
|30032 |chocolate-ice-cream                    |초콜릿             |true   |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/chocolate-ice-cream/scoop-shop/packshot/main.png                   |
|30039 |new-york-super-fudge-chunk-ice-cream   |뉴욕 수퍼 퍼지 청크     |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/new-york-super-fudge-chunk-ice-cream/scoop-shop/packshot/main.png  |
|30038 |mint-chocolate-chunk-ice-cream         |민트 초콜릿 청크       |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/mint-chocolate-chunk-ice-cream/scoop-shop/packshot/main.png        |
|30041 |vanilla-ice-cream                      |바닐라             |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/vanilla-ice-cream/scoop-shop/packshot/main.png                     |
|30043 |sweet-cream-and-cookies-ice-cream      |스위트 크림&쿠키       |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/sweet-cream-and-cookies-ice-cream/scoop-shop/packshot/main.png     |
|30040 |strawberry-ice-cream                   |스트로베리           |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/strawberry-ice-cream/scoop-shop/packshot/main.png                  |
|30035 |chunky-monkey-ice-cream                |청키 몽키®          |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/chunky-monkey-ice-cream/scoop-shop/packshot/main.png               |
|30031 |cherry-garcia-ice-cream                |체리 가르시아®        |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/cherry-garcia-ice-cream/scoop-shop/packshot/main.png               |
|30033 |chocolate-chip-cookie-dough-ice-cream  |초콜릿 칩 쿠키 도우     |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/chocolate-chip-cookie-dough-ice-cream/scoop-shop/packshot/main.png |
|30034 |chocolate-fudge-brownie-ice-cream      |초콜릿 퍼지 브라우니     |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/chocolate-fudge-brownie-ice-cream/scoop-shop/packshot/main.png     |
|30036 |half-baked-ice-cream                   |하프베이크드®         |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/half-baked-ice-cream/scoop-shop/packshot/main.png                  |
|30037 |lemonade-sorbet                        |레모네이드 소르베       |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/lemonade-sorbet/scoop-shop/packshot/main.png                       |
|30042 |berry-berry-extraordinary-sorbet       |베리베리 엑스트라 오디너리® |false  |ice-cream-shop-flavours |스쿱 샵    |/assets/img/flavours/berry-berry-extraordinary-sorbet/scoop-shop/packshot/main.png      |
|------|---------------------------------------|----------------|-------|------------------------|--------|----------------------------------------------------------------------------------------|

[DEBUG] 25-11-24 12:41:04 [selectAllFlavours:135] - <==      Total: 29
[INFO ] 25-11-24 12:41:04 [MyInterceptor:122] - running time: 116(ms)
[INFO ] 25-11-24 12:41:14 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:41:14 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:41:14 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:41:14 [MyInterceptor:101] - - REFERER : time=10387, url=http://localhost:8080/flavours
[INFO ] 25-11-24 12:41:18 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:41:18 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:41:18 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:41:18 [MyInterceptor:101] - - REFERER : time=14297, url=http://localhost:8080/flavours
[INFO ] 25-11-24 12:43:32 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94550 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:43:32 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:43:32 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:43:32 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94894 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:43:32 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:43:32 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:43:34 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 2.733 seconds (process running for 244.295)
[WARN ] 25-11-24 12:43:38 [OptionalLiveReloadServer:62] - Unable to start LiveReload server
[WARN ] 25-11-24 12:43:38 [AnnotationConfigServletWebServerApplicationContext:635] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
[ERROR] 25-11-24 12:43:38 [LoggingFailureAnalysisReporter:40] - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

[INFO ] 25-11-24 12:44:02 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94550 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:44:02 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:44:02 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:44:03 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94953 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:44:03 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:44:03 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:44:04 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.519 seconds (process running for 274.024)
[WARN ] 25-11-24 12:44:07 [OptionalLiveReloadServer:62] - Unable to start LiveReload server
[WARN ] 25-11-24 12:44:08 [AnnotationConfigServletWebServerApplicationContext:635] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
[ERROR] 25-11-24 12:44:08 [LoggingFailureAnalysisReporter:40] - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

[INFO ] 25-11-24 12:44:26 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:44:26 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:44:26 [MyInterceptor:85] - [GET] http://localhost:8080/
[INFO ] 25-11-24 12:44:37 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 95000 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:44:37 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:44:37 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[WARN ] 25-11-24 12:44:41 [OptionalLiveReloadServer:62] - Unable to start LiveReload server
[WARN ] 25-11-24 12:44:41 [AnnotationConfigServletWebServerApplicationContext:635] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
[ERROR] 25-11-24 12:44:41 [LoggingFailureAnalysisReporter:40] - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

[INFO ] 25-11-24 12:45:27 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 95075 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:45:27 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:45:27 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[WARN ] 25-11-24 12:45:31 [OptionalLiveReloadServer:62] - Unable to start LiveReload server
[WARN ] 25-11-24 12:45:31 [AnnotationConfigServletWebServerApplicationContext:635] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
[ERROR] 25-11-24 12:45:31 [LoggingFailureAnalysisReporter:40] - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

[INFO ] 25-11-24 12:48:34 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 94550 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:48:34 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:48:34 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:48:35 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 95331 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:48:35 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:48:35 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:48:35 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 1.438 seconds (process running for 545.274)
[WARN ] 25-11-24 12:48:39 [OptionalLiveReloadServer:62] - Unable to start LiveReload server
[WARN ] 25-11-24 12:48:39 [AnnotationConfigServletWebServerApplicationContext:635] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
[ERROR] 25-11-24 12:48:39 [LoggingFailureAnalysisReporter:40] - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8081 was already in use.

Action:

Identify and stop the process that's listening on port 8081 or configure this application to listen on another port.

[INFO ] 25-11-24 12:49:35 [BenjerryscloneApplication:53] - Starting BenjerryscloneApplication using Java 17.0.14 with PID 95466 (/Users/sieun/ben-jerrys-clone/build/classes/java/main started by sieun in /Users/sieun/ben-jerrys-clone)
[DEBUG] 25-11-24 12:49:35 [BenjerryscloneApplication:54] - Running with Spring Boot v3.5.5, Spring v6.2.10
[INFO ] 25-11-24 12:49:35 [BenjerryscloneApplication:652] - No active profile set, falling back to 1 default profile: "dev"
[INFO ] 25-11-24 12:49:40 [BenjerryscloneApplication:59] - Started BenjerryscloneApplication in 5.183 seconds (process running for 5.889)
[INFO ] 25-11-24 12:50:13 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:50:14 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:50:14 [MyInterceptor:85] - [GET] http://localhost:8081/
[INFO ] 25-11-24 12:50:21 [MyInterceptor:47] - ---------- new client connect ----------
[INFO ] 25-11-24 12:50:21 [MyInterceptor:67] - [Client] 0:0:0:0:0:0:0:1, Mac, Mac OS X 10.15, Chrome 139.0
[INFO ] 25-11-24 12:50:21 [MyInterceptor:85] - [GET] http://localhost:8081/home
[INFO ] 25-11-24 12:50:21 [MyInterceptor:122] - running time: 203(ms)
